<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="2675b7fb-dfdf-4e2c-ba84-b80d4a2e23ba" activeEnvironment="Default" name="WordPress" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="562e8ad8-9a3e-4a0b-831e-68c48bbe4dd3" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://public-api.wordpress.com" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://public-api.wordpress.com</con:endpoint></con:endpoints><con:resource name="new" path="/rest/v1.2/sites/135349986/posts/new" id="e50ec2c6-f9f7-416d-8369-d6445f224ae0"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>context</con:name><con:value>edit</con:value><con:style>QUERY</con:style><con:default>edit</con:default></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Add New Site Page" id="acc1ecb4-f9f6-4ec8-aa04-2181f026c18b" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:new="https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/new">new:Response</con:element></con:representation><con:request name="Request 1" id="dad33fea-d884-43a9-9104-b91fc7a7261f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request><![CDATA[site_ID=135349986&status=draft&type=page&content=add+new+site+page&title=API+TEST&parent_id=&page_template=]]></con:request><con:originalUri>https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/new</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="posts" path="/rest/v1.1/sites/135349986/posts" id="bffedd48-359e-4364-a42b-8d79f11b9be5"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>page</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>number</con:name><con:value>20</con:value><con:style>QUERY</con:style><con:default>20</con:default></con:parameter><con:parameter><con:name>search</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>status</con:name><con:value>publish,private</con:value><con:style>QUERY</con:style><con:default>publish,private</con:default></con:parameter><con:parameter><con:name>type</con:name><con:value>p</con:value><con:style>QUERY</con:style><con:default>p</con:default></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Get published Site List" id="6fe4c1d6-f36b-4891-a414-a13d3036aec6" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:pos="https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts">pos:Response</con:element></con:representation><con:request name="Request 1" id="87720599-42b0-41dd-a8a6-75c3e6176762" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
  <con:entry key="type" value="page"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>cookie</con:entry><con:entry>authorization</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="113" path="/rest/v1.2/sites/135349986/posts/${#TestSuite#ID}" id="b82696d5-c83b-4996-abf8-b0b4f0235425"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>context</con:name><con:value>edit</con:value><con:style>QUERY</con:style><con:default>edit</con:default></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Publish Draft Site Page" id="0cff2359-a827-4198-9519-df0f6dc3d687" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/plain;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:pos="https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/">pos:Response</con:element></con:representation><con:request name="Request 1" id="c1bd05b9-8a1d-4232-b672-16d95bd1639d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request>content=Publish+this+site+page&amp;status=publish</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="posts" path="/rest/v1.1/sites/135349986/posts" id="aa274b57-76a2-419c-9cde-72484f57c8e4"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>page</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>number</con:name><con:value>20</con:value><con:style>QUERY</con:style><con:default>20</con:default></con:parameter><con:parameter><con:name>search</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>status</con:name><con:value>draft,pending</con:value><con:style>QUERY</con:style><con:default>draft,pending</con:default></con:parameter><con:parameter><con:name>type</con:name><con:value>page</con:value><con:style>QUERY</con:style><con:default>page</con:default></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Get Draft Site List" id="94b16ff1-6685-4940-af73-3f747fe12044" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:pos="https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts">pos:Response</con:element></con:representation><con:request name="Request 1" id="96d83f2a-3f60-410e-88f8-3df006c3035e" mediaType="application/json"><con:settings/><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="113" path="/rest/v1.2/sites/135349986/posts/${#TestSuite#ID}" id="7f1be0e2-a709-4ebf-a52a-86602677396f"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>context</con:name><con:value>edit</con:value><con:style>QUERY</con:style><con:default>edit</con:default></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Update Site Page" id="43f1ba78-8ca8-4d15-bc0c-3472c8572e5e" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/119">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="d530cc19-b4c4-42ef-9fa2-d2f970391e70" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request>title=Update+API+TEST&amp;content=Update+this+site+page</con:request><con:originalUri>https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/119</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="delete" path="/rest/v1.1/sites/135349986/posts/${#TestSuite#ID}/delete" id="65a4c6d1-c694-45b2-aa97-53f775582d33"><con:settings/><con:parameters><con:parameter><con:name>http_envelope</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>authorization</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>cookie</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Delete Site Page" id="4bd87fe5-703e-4f95-ba7f-3f3c7e3aa232" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:del="https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts/162/delete">del:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="4e47a072-51ba-4202-8dee-bb7ba7b578f6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="89b5c65d-3d05-4807-b9d2-b31a94210b9d" name="WordPress TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b6c45a2b-886a-4d87-a557-149460ad9390" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AddNewSitePage" searchProperties="true"><con:description>TestCase generated for REST Resource [new] located at [/rest/v1.2/sites/135349986/posts/new]</con:description><con:settings/><con:testStep type="restrequest" name="Add New Site Page" id="827dbc86-c082-415b-ab2f-6e80c3b70793"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.2/sites/135349986/posts/new" methodName="Add New Site Page" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Add New Site Page" id="dad33fea-d884-43a9-9104-b91fc7a7261f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request><![CDATA[site_ID=135349986&status=draft&type=page&content=add+new+site+page&title=API+TEST&parent_id=&page_template=]]></con:request><con:originalUri>https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/new</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ee485f6e-d2ca-4d58-bebf-dc0c2dd51188" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="827effc5-5e37-43e1-8079-f8445081b458" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def responseMessage = context.testCase.getTestStepByName("Add New Site Page").getPropertyValue("response")

def responseSlurper = new JsonSlurper().parseText(responseMessage)

def ID = responseSlurper.body.ID

log.info (ID)

assert ID != null : "ERROR: Failed to add new site page"

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Save New ID" id="30e88593-35bd-474e-8f85-998bb6b5320b"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseMessage = testRunner.testCase.getTestStepByName("Add New Site Page").getPropertyValue("response")

def responseSlurper = new JsonSlurper().parseText(responseMessage)

log.info (responseSlurper.body.ID)

if(responseSlurper.body.ID == null){
	testRunner.fail("Failed to add new site page")
}

testRunner.testCase.testSuite.setPropertyValue("ID", responseSlurper.body.ID.toString())
</script></con:config></con:testStep><con:testStep type="restrequest" name="Get Draft Site List" id="54fd7733-e49b-42f2-bf7b-8db13dd42da0"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts" methodName="Get Draft Site List" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Draft Site List" id="96d83f2a-3f60-410e-88f8-3df006c3035e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2ed9d87c-35a7-4f79-8213-4793b9bd7ea6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check New Site Exist" id="d91a62a0-0fff-4ea6-8dcc-2670cf11f600"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseListMessage = testRunner.testCase.getTestStepByName("Get Draft Site List").getPropertyValue("response")
def responseListSlurper = new JsonSlurper().parseText(responseListMessage)

def responseMessage = testRunner.testCase.getTestStepByName("Add New Site Page").getPropertyValue("response")
def responseSlurper = new JsonSlurper().parseText(responseMessage)

def posts = responseListSlurper.body.posts
def newSiteHasCreated = false
def i = 0
while(posts[i]!=null){
	if ( posts[i].ID.toString() == responseSlurper.body.ID.toString()  )
	{
		newSiteHasCreated = true
	}
	
	i++
}

assert newSiteHasCreated : "ERROR: new site page does not show in list"</script></con:config></con:testStep><con:properties><con:property><con:name>currentId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ID</con:name><con:value>156</con:value></con:property></con:properties></con:testCase><con:testCase id="1812d210-0097-4057-b130-adb870353d0f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PublishNewSitePage" searchProperties="true"><con:description>TestCase generated for REST Resource [113] located at [/rest/v1.2/sites/135349986/posts/${#TestCase#ID}]</con:description><con:settings/><con:testStep type="restrequest" name="Publish Site Page" id="cdae17bf-b519-4f8b-b878-f2335e925c1f"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.2/sites/135349986/posts/${#TestSuite#ID}" methodName="Publish Draft Site Page" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Publish Site Page" id="c1bd05b9-8a1d-4232-b672-16d95bd1639d" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request>content=Publish+this+site+page&amp;status=publish</con:request><con:originalUri>https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/</con:originalUri><con:assertion type="Simple Contains" id="ce4d85f4-dbc5-47ff-8245-b866fa21393e" name="Contains"><con:configuration><token>200</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check Publishe Right Site" id="d0be8b8c-acd9-4c37-9a9f-174636c13390"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseMessage = testRunner.testCase.getTestStepByName("Publish Site Page").getPropertyValue("response")
def responseSlurper = new JsonSlurper().parseText(responseMessage)

def NewSiteID = testRunner.testCase.testSuite.getPropertyValue("ID")
log.info (NewSiteID)

assert responseSlurper.body.ID.toString() == NewSiteID.toString() : "ERROR: Publish wrong site page"</script></con:config></con:testStep><con:testStep type="restrequest" name="Get Published Site List" id="bcad1668-bd92-4e27-b8d9-714f672ee668"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts" methodName="Get published Site List" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Published Site List" id="87720599-42b0-41dd-a8a6-75c3e6176762" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="569a11aa-80d8-4b04-8a9f-7fadb8e3244e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
  <con:entry key="type" value="page"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>cookie</con:entry><con:entry>authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check New Site Exist" id="e9d2df68-03fa-4cad-8eae-482e1084813c"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseListMessage = testRunner.testCase.getTestStepByName("Get Published Site List").getPropertyValue("response")
def responseListSlurper = new JsonSlurper().parseText(responseListMessage)


def responsePublishedMessage = testRunner.testCase.getTestStepByName("Publish Site Page").getPropertyValue("response")
def responsePublishedSlurper = new JsonSlurper().parseText(responsePublishedMessage)

def posts = responseListSlurper.body.posts
def newSiteHasCreated = false
def i = 0
while(posts[i]!=null){
	if ( posts[i].ID.toString() == responsePublishedSlurper.body.ID.toString()  )
	{
		newSiteHasCreated = true
	}
	i++
}

assert newSiteHasCreated : "ERROR: new site page does not show in list"</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f66d2f44-3fca-413e-9052-052f0acb48d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="UpdateNewSitePage" searchProperties="true"><con:description>TestCase generated for REST Resource [113] located at [/rest/v1.2/sites/135349986/posts/${#TestCase#ID}]</con:description><con:settings/><con:testStep type="restrequest" name="Update Site Page" id="fcf0b4d8-5122-48f5-9aa7-7512c2c43e75"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.2/sites/135349986/posts/${#TestSuite#ID}" methodName="Update Site Page" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update Site Page" id="d530cc19-b4c4-42ef-9fa2-d2f970391e70" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="application/x-www-form-urlencoded; charset=UTF-8" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request>title=Update+API+TEST&amp;content=Update+this+site+page</con:request><con:originalUri>https://public-api.wordpress.com/rest/v1.2/sites/135349986/posts/119</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bb85e1af-79e7-49bd-a7cc-06c0c5c1b9bc" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>context</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="29e40847-17dd-44b0-9580-18d71ff44aa6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DeleteNewSitePage" searchProperties="true"><con:description>TestCase generated for REST Resource [delete] located at [/rest/v1.1/sites/135349986/posts/${#TestCase#ID}/delete]</con:description><con:settings/><con:testStep type="restrequest" name="Delete Site Page" id="a4852e79-3935-4212-98a0-b7a26f63fff3"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts/${#TestSuite#ID}/delete" methodName="Delete Site Page" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete Site Page" id="4e47a072-51ba-4202-8dee-bb7ba7b578f6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts/162/delete</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="900d4687-72a8-4afa-b4d9-6f9a1f76a3cf" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check Delete Right Site" id="49aa15ec-6e06-44c4-a401-652fa473fe78"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseDeletedMessage = testRunner.testCase.getTestStepByName("Delete Site Page").getPropertyValue("response")
def responseDeletedSlurper = new JsonSlurper().parseText(responseDeletedMessage)

def DeletedID = testRunner.testCase.testSuite.getPropertyValue("ID")
log.info (DeletedID)

assert responseDeletedSlurper.body.ID.toString() == DeletedID.toString() : "ERROR: Delete wrong site page"</script></con:config></con:testStep><con:testStep type="restrequest" name="Get Published Site List After Delete" id="24849662-af52-47a2-8d47-08c231067d42"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts" methodName="Get published Site List" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Published Site List After Delete" id="87720599-42b0-41dd-a8a6-75c3e6176762" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="569a11aa-80d8-4b04-8a9f-7fadb8e3244e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
  <con:entry key="type" value="page"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>cookie</con:entry><con:entry>authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check Site Deleted" id="0f66c15e-ae15-430b-b6de-f082bdb8818d"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseListMessage = testRunner.testCase.getTestStepByName("Get Published Site List After Delete").getPropertyValue("response")
def responseListSlurper = new JsonSlurper().parseText(responseListMessage)


def responseDeletedMessage = testRunner.testCase.getTestStepByName("Delete Site Page").getPropertyValue("response")
def responseDeletedSlurper = new JsonSlurper().parseText(responseDeletedMessage)

def posts = responseListSlurper.body.posts
def DeletedSite = false
def i = 0
while(posts[i]!=null){
	if ( responseDeletedSlurper.body.ID.toString() ==  posts[i].ID.toString() )
	{
		DeletedSite = true
	}
	i++
}

assert !DeletedSite : "ERROR: new site page does not show in list"</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0ba063fa-aad0-43a0-8fed-0ffcd3e3aa7a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RandomDeleteSitePage" searchProperties="true"><con:description>TestCase generated for REST Resource [delete] located at [/rest/v1.1/sites/135349986/posts/${#TestCase#ID}/delete]</con:description><con:settings/><con:testStep type="restrequest" name="Delete Site Page" id="81d8d12f-8887-4537-b96f-cc31e2fa1306"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts/${#TestSuite#ID}/delete" methodName="Delete Site Page" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete Site Page" id="4e47a072-51ba-4202-8dee-bb7ba7b578f6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts/162/delete</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="900d4687-72a8-4afa-b4d9-6f9a1f76a3cf" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>authorization</con:entry><con:entry>cookie</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check Delete Right Site" id="775c9a26-910e-4eb9-845c-4006021a1248"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseDeletedMessage = testRunner.testCase.getTestStepByName("Delete Site Page").getPropertyValue("response")
def responseDeletedSlurper = new JsonSlurper().parseText(responseDeletedMessage)

def DeletedID = testRunner.testCase.testSuite.getPropertyValue("ID")
log.info (DeletedID)

assert responseDeletedSlurper.body.ID.toString() == DeletedID.toString() : "ERROR: Delete wrong site page"</script></con:config></con:testStep><con:testStep type="restrequest" name="Get Published Site List" id="85616a13-f456-40d2-a965-fa87786a3bb8"><con:settings/><con:config service="https://public-api.wordpress.com" resourcePath="/rest/v1.1/sites/135349986/posts" methodName="Get published Site List" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Published Site List" id="87720599-42b0-41dd-a8a6-75c3e6176762" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://public-api.wordpress.com</con:endpoint><con:request/><con:originalUri>https://public-api.wordpress.com/rest/v1.1/sites/135349986/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="569a11aa-80d8-4b04-8a9f-7fadb8e3244e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="cookie" value="${#Project#cookie}"/>
  <con:entry key="authorization" value="${#Project#authorization}"/>
  <con:entry key="type" value="page"/>
</con:parameters><con:parameterOrder><con:entry>http_envelope</con:entry><con:entry>page</con:entry><con:entry>number</con:entry><con:entry>search</con:entry><con:entry>status</con:entry><con:entry>type</con:entry><con:entry>cookie</con:entry><con:entry>authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Choose One Site Page" id="14c541b2-4fda-4518-aa32-16d133dab77a"><con:settings/><con:config><script>import groovy.json.JsonSlurper

def responseListMessage = testRunner.testCase.getTestStepByName("Get Published Site List After Delete").getPropertyValue("response")
def responseListSlurper = new JsonSlurper().parseText(responseListMessage)


def posts = responseListSlurper.body.posts

def i = 0

def siteIdList = []

while (posts[i] != null){
	siteIdList.push(posts[i].ID)
	i++
}

def Random random = new Random()

if(siteIdList.size() == 0){
	testRunner.cancel("There is not any site page")
}else{
	def randomNumber = random.nextInt(siteIdList.size())
	testRunner.testCase.setPropertyValue("ChoosedSiteID", )
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>ID</con:name><con:value>172</con:value></con:property></con:properties></con:testSuite><con:properties><con:property><con:name>cookie</con:name><con:value><![CDATA[__qca=P0-1187820277-1504862993270; G_ENABLED_IDPS=google; SSE_personal_plan_4788_20170825=original; _wpndash=9f71fcfe5b0b03ee5751e2ba; __ssid=d3a414e0-2ba7-4867-b2f8-7b1ea18954c3; _ym_uid=1505811048387258240; wordpress_test_cookie=WP+Cookie+check; wordpress_logged_in=janeyzhou%7C1600419267%7CLgJCD4s2jtvSQ72c6S9JUHPW7ZFVsuT3mm00lrh00c7%7C222ca9c66d12e19c0b3ec701461dfa8893a9960d2aa56842eb72c59f05a5b35e; wordpress_eli=1; wp_api_sec=janeyzhou%7C1600419267%7CLgJCD4s2jtvSQ72c6S9JUHPW7ZFVsuT3mm00lrh00c7%7C85fb2ce3d2f4b3f5ddfa7806e24438e404ce66d6f2a11983cb43cf24571f5492; tk_tc=1506052236115; _ga=GA1.2.1339292131.1504862992; _gid=GA1.2.1517265481.1505973564; _gat=1; _uetsid=_uet29382b22; tk_qs=; wpc_wpc=account=janeyzhou&avatar=https%3A%2F%2F2.gravatar.com%2Favatar%2F89c894bbf61f508fe145f3af83986ba3%3Fs%3D25%26amp%3Bd%3Dhttps%253A%252F%252Fs2.wp.com%252Fwp-content%252Fmu-plugins%252Fhighlander-comments%252Fimages%252Fwplogo.png&email=wuyinhu0311%40163.com&link=http%3A%2F%2Fresttestdotblog.wordpress.com&name=janeyzhou&uid=127559744&access_token=3c64c6abb5ca0a19da3ed53461caa291188b0364]]></con:value></con:property><con:property><con:name>authorization</con:name><con:value>X-WPCOOKIE 4e330fc85559d17f1dae1e0a632eccee:1:https://wordpress.com</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>